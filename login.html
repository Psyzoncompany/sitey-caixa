<!-- c:\Users\AAAA\Desktop\sitey-caixa\login.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" type="image/png" href="img/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-180.png">
    <meta name="apple-mobile-web-app-title" content="PSYZON Caixa">
    <meta name="application-name" content="PSYZON Caixa">
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="/manifest.webmanifest">
    <title>Login - PSYZON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #111827; color: #e5e7eb; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="glass p-8 rounded-xl shadow-2xl w-full max-w-md">
        <div class="text-center mb-8">
            <img src="img/logo.png" alt="Logo" class="h-16 mx-auto mb-4">
            <h1 class="text-2xl font-bold text-white">Bem-vindo de volta</h1>
            <p class="text-gray-400 text-sm">Faça login para acessar o sistema</p>
        </div>

        <form id="login-form" class="space-y-6">
            <div>
                <label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email</label>
                <input type="email" id="email" value="admin@sitey.com" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" required>
            </div>
            <div>
                <label for="password" class="block text-sm font-medium text-gray-300 mb-2">Senha</label>
                <input type="password" id="password" value="451021" class="w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 text-white focus:ring-2 focus:ring-cyan-500 focus:border-transparent outline-none transition" required>
            </div>
            
            <div id="error-msg" class="text-red-400 text-sm text-center hidden"></div>

            <button type="submit" id="login-btn" class="w-full py-3 px-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold rounded-lg shadow-lg transform transition hover:-translate-y-0.5">
                Entrar
            </button>

            <div class="relative">
                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                    <div class="w-full border-t border-gray-700"></div>
                </div>
                <div class="relative flex justify-center text-xs uppercase">
                    <span class="bg-gray-900 px-2 text-gray-400">ou</span>
                </div>
            </div>

            <button type="button" id="google-login-btn" class="w-full py-3 px-4 bg-white/10 hover:bg-white/20 border border-white/20 text-white font-semibold rounded-lg shadow transition flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5" aria-hidden="true">
                    <path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303C33.655 32.657 29.203 36 24 36c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.96 3.04l5.657-5.657C34.046 6.053 29.27 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/>
                    <path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 16.108 19.005 13 24 13c3.059 0 5.842 1.154 7.96 3.04l5.657-5.657C34.046 6.053 29.27 4 24 4c-7.682 0-14.321 4.337-17.694 10.691z"/>
                    <path fill="#4CAF50" d="M24 44c5.176 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.146 35.091 26.715 36 24 36c-5.182 0-9.626-3.329-11.289-7.946l-6.522 5.025C9.53 39.556 16.227 44 24 44z"/>
                    <path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303a12.06 12.06 0 01-4.084 5.571h.001l6.19 5.238C37.02 39.067 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"/>
                </svg>
                Entrar com Google
            </button>
        </form>
    </div>

    <!-- Carrega o módulo de configuração do Firebase -->
    <script type="module" src="firebase-config.js"></script>
    
    <script>

        const googleBtn = document.getElementById('google-login-btn');

        googleBtn.addEventListener('click', async () => {
            const btn = document.getElementById('login-btn');
            const errorMsg = document.getElementById('error-msg');

            googleBtn.disabled = true;
            btn.disabled = true;
            googleBtn.textContent = 'Conectando Google...';
            errorMsg.classList.add('hidden');

            try {
                await window.firebaseAuth.loginWithGoogle();
            } catch (error) {
                console.error(error);
                googleBtn.disabled = false;
                btn.disabled = false;
                googleBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5" aria-hidden="true"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303C33.655 32.657 29.203 36 24 36c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.96 3.04l5.657-5.657C34.046 6.053 29.27 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/><path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 16.108 19.005 13 24 13c3.059 0 5.842 1.154 7.96 3.04l5.657-5.657C34.046 6.053 29.27 4 24 4c-7.682 0-14.321 4.337-17.694 10.691z"/><path fill="#4CAF50" d="M24 44c5.176 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.146 35.091 26.715 36 24 36c-5.182 0-9.626-3.329-11.289-7.946l-6.522 5.025C9.53 39.556 16.227 44 24 44z"/><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303a12.06 12.06 0 01-4.084 5.571h.001l6.19 5.238C37.02 39.067 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"/></svg> Entrar com Google`;
                errorMsg.textContent = 'Erro ao entrar com Google: ' + error.message;
                errorMsg.classList.remove('hidden');
            }
        });

        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const btn = document.getElementById('login-btn');
            const errorMsg = document.getElementById('error-msg');

            btn.disabled = true;
            btn.textContent = 'Entrando...';
            errorMsg.classList.add('hidden');

            try {
                // firebaseAuth é exposto pelo firebase-config.js
                await window.firebaseAuth.login(email, password);
                // O redirecionamento acontece automaticamente no onAuthStateChanged do firebase-config.js
            } catch (error) {
                console.error(error);
                btn.disabled = false;
                btn.textContent = 'Entrar';
                errorMsg.textContent = 'Erro ao entrar: ' + error.message;
                errorMsg.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
